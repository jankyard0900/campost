<div class='container mt-5 h-75'>
  <div class='row h-100'>
    <div class='col-md-2 mb-3'>
      <%= render 'category_search', categories: @categories %>
    </div>

    <div class='col-md-10'>
        <div>
          <h3><strong>キャンプギア一覧</strong></h3>
          <div class="mt-2"><strong>（全<%= @gears_all.count%>件）</strong></div>
          <p>
            <%= link_to '新しい順', gears_path(latest: "新着順") %>
            | <%= link_to '評価の高い順', gears_path(star_count: "評価の高い順") %>
          </p>
        </div>
        <div class = "contents" style="display:flex; flex-wrap:wrap;">
          <% @gears.each do |gear| %>
          <div class="col-lg-4">
            <div class="d-flex flex-column">
              <!--投稿画像の一枚目表示-->
              <%= link_to gear_path(gear.id) do %>
                <% gear.gear_images.first(1).each do |image| %>
                  <%= image_tag image, size:'200x160' %>
                <% end %>
              <% end %>
              <h5 style="margin-bottom: 20px; margin-top: 20px;"><%= gear.name %></h5>
              <!--レビューの平均☆表示予定-->
              <div id="star-rate<%= gear.id%>"></div>
              <p>(<b><%= gear.gear_reviews.count %>件</b>)</p>
              <script>
              $(document).on('turbolinks:load', function() {
                $('#star-rate<%= gear.id %>').empty();
                $('#star-rate<%= gear.id%>').raty({
                  size      : 36,
                  starOff   : '<%= asset_path('star-off.png') %>',
                  starOn    : '<%= asset_path('star-on.png') %>',
                  starHalf  : '<%= asset_path('star-half.png') %>',
                  half      : true,
                  readOnly  : true,
                  score: '<%= gear.gear_reviews.average(:rate).to_f.round(1) %>',
                });
              });
              </script>
            </div>
          </div>
          <% end %>
        </div>

        <div class="d-flex justify-content-center">
          <%= paginate @gears %>
        </div>
      </div>
    </div>
  </div>
</div>